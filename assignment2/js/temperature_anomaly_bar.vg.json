{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": "Global Temperature Anomalies (1990-2020)",
    "width": 800,
    "height": 500,
    "data": {
      "url": "https://raw.githubusercontent.com/Spxctator/spxctator.github.io/main/.data/global-temperature-anomalies-1990-2020.csv",
      "format": {"type": "csv"}
    },
    "layer": [
      {
        "mark": "bar",
        "encoding": {
          "x": {"field": "Year", "type": "ordinal", "title": "Year"},
          "y": {
            "field": "Temperature anomaly",
            "type": "quantitative",
            "title": "Temperature Anomaly (°C)"
          },
          "color": {
            "condition": {
              "test": "datum['Temperature anomaly'] >= 0",
              "value": "#e45756"
            },
            "value": "#1f77b4"
          },
          "tooltip": [
            {"field": "Year", "type": "ordinal", "title": "Year"},
            {
              "field": "Temperature anomaly",
              "type": "quantitative",
              "title": "Anomaly (°C)",
              "format": ".2f"
            }
          ]
        }
      },
      {
        "mark": {"type": "line", "color": "rebeccapurple"},
        "transform": [{"regression": "Temperature anomaly", "on": "Year"}],
        "encoding": {
          "x": {"field": "Year", "type": "ordinal"},
          "y": {"field": "Temperature anomaly", "type": "quantitative"}
        }
      },
      {
        "mark": {
          "type": "rule",
          "stroke": "grey",
          "strokeWidth": 1,
          "strokeDash": [4, 2]
        },
        "encoding": {
          "x": {"datum": "1998"}
        }
      },
      {
        "mark": {
          "type": "rule",
          "stroke": "grey",
          "strokeWidth": 1,
          "strokeDash": [4, 2]
        },
        "encoding": {
          "x": {"datum": "2015"}
        }
      },
      {
        "mark": {
          "type": "text",
          "text": "El Niño",
          "align": "center",
          "fontSize": 14,
          "fontWeight": "normal",
          "color": "black",
          "dy": -10
        },
        "encoding": {
          "x": {"datum": "2015"},
          "y": {"datum": 0.6}
        }
      },
      {
        "mark": {
          "type": "text",
          "text": "El Niño",
          "align": "center",
          "fontSize": 14,
          "fontWeight": "normal",
          "color": "black",
          "dy": -9
        },
        "encoding": {
          "x": {"datum": "1998"},
          "y": {"datum": 0.6}
        }
      }
    ]
  }
  